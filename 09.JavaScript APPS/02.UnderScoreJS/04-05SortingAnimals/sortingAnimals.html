<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SortingAnimals</title>
    <script src="Scripts/underscore-min.js"></script>
    <script src="animal.js"></script>
</head>
<body>
    <script>
        var animals = [
            new Animal("Bear-Gosho","bear", 4),
            new Animal("Dog-Sharo", "dog", 4),
            new Animal("Fly-Stoqn", "fly", 8),
            new Animal("Bat-Giorgi", "bat", 100),
            new Animal("Fly-Allah", "fly", 10),
            new Animal("Bear-Maugli", "bear", 6),
            new Animal("Cat-Stancho", "cat", 4),
            new Animal("Cat-Asen", "cat", 2),
            new Animal("Dog-Balkan", "dog", 4),
            new Animal("Bat-Dinko", "bat", 8)
        ];
        // Task 4. Write a function that by a given array of animals, groups them by species and sorts them by number of legs
        console.log('Task 4.')

        var groupedAnimals = _.groupBy(animals, function (animal) {
            return animal.species;
        });

        for (var prop in groupedAnimals) {
            var sortedSpeciesByNumberOfLegs = _.sortBy(groupedAnimals[prop], function (animal) {
                return animal.numberOfLegs;
            });
            groupedAnimals[prop] = sortedSpeciesByNumberOfLegs;
        }
        
        _.each(groupedAnimals, function (group) {
            for (var animal in group) {
                console.log(group[animal].toString());
            }
        });
        console.log('--------------------------------------------')

        // Task 5. By a given array of animals, find the total number of legs
        // Each animal can have 2, 4, 6, 8 or 100 legs
        console.log('Task 5.')

        var totalNumberOfLegs = 0;
        _.each(animals, function (animal) {
            if (animal.numberOfLegs) {
                totalNumberOfLegs += animal.numberOfLegs;
            }
            else {
                throw new Error("The animal " + animal.fname + " doesn't have any legs");
            }
        })
        console.log("Total number of legs in the given array of animals is -> " + totalNumberOfLegs);
        console.log('--------------------------------------------')
    </script>
</body>
</html>
