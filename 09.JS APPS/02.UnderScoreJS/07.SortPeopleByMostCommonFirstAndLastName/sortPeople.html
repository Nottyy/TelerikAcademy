<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SortPeopleByMostCommonFirstAndLastName</title>
    <script src="Scripts/underscore-min.js"></script>
    <script src="person.js"></script>
</head>
<body>
    <script>
        var people = [
            new person('Gosho', 'Peshev'),
            new person('Gosho', 'Ivanov'),
            new person('Gosho', 'Ivanov'),
            new person('Gosho', 'Ivanov'),
            new person('Stavri', 'Senishov'),
            new person('Petkan', 'Ivanov'),
            new person('Gosho', 'Senishov'),
            new person('Nikodim', 'Peshev'),
        ];

        findMostCommonNames(people, "fname");
        findMostCommonNames(people, "lname");

        function findMostCommonNames(people, nameType) {
            if (nameType === "fname") {
                var mostCommonNames = _.countBy(people, function (person) {
                    return person.fname;
                });
            }
            else {
                var mostCommonNames = _.countBy(people, function (person) {
                    return person.lname;
                });
            }
            
            var mostCommonNameCount = _.max(mostCommonNames, function (nameCount) {
                return nameCount;
            });

            for (var name in mostCommonNames) {
                if (mostCommonNames[name] === mostCommonNameCount) {
                    console.log("The most common " + nameType + " is " + name + ". It appears " + mostCommonNameCount + " times!");
                }
            }
        }
    </script>
</body>
</html>
