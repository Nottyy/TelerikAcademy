<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>SortStudentsNames</title>
    <script src="Scripts/underscore-min.js"></script>
    <script src="student.js"></script>
</head>
<body>
    <script>
        var students = [
            new Student("Asparuh", "Metkanov", 19, { biology: 3, history: 2, chemistry: 4 }),
            new Student("Stoiko", "Sakaliev", 22, { biology: 4, history: 3, chemistry: 4 }),
            new Student("Nikodim", "Milenkov", 79, { biology: 2, history: 6, chemistry: 6 }),
            new Student("Penko", "Ankov", 39, { biology: 6, history: 6, chemistry: 6 }),
            new Student("Stavri", "Yankov", 9, { biology: 5, history: 5, chemistry: 2 }),
            new Student("Asparuh", "Leshnikov", 24, { biology: 5, history: 5, chemistry: 2 }),
        ];
       
        // Task 1.Write a method that from a given array of students finds all students whose first name 
        // is before its last name alphabetically. Print the students in descending order by full name. 
        
        console.log("Task 1.")

        _.chain(students)
            .filter(function (students) {
                return students.firstName < students.lastName;
            })
            .sortBy(function (filteredStudents) {
                return filteredStudents.firstName + " " + filteredStudents.lastName;
            })
            .each(function (student) {
                console.log(student.toString());
            });
        console.log('----------------------------------------------------')

        console.log("Task 2.")

        _.chain(students)
            .filter(function (student) {
                return student.age >= 18 && student.age <= 24;
            })
            .each(function (student) {
                console.log(student.toString());
            });
        console.log('----------------------------------------------------')

        console.log("Task 3.")

        var sortedByAverageMarks = _.sortBy(students, function (student) {
            return student.calculateAverageMarks();
        });
        var studentWithHighestMarks = _.last(sortedByAverageMarks);
        console.log(studentWithHighestMarks.logMarks());
            
        console.log('----------------------------------------------------')

    </script>
</body>
</html>
