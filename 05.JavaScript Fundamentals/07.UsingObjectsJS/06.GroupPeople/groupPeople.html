<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>GroupPeople</title>
</head>
<body>
    <h3>
        06. Write a function that groups an array of persons by age, first or last name.<br />
        The function must return an associative array, with keys - the groups, and values -arrays with persons in this groups.<br />
        Use function overloading (i.e. just one function).<br />
    </h3>
    <h4>
        See the console for the result!
    </h4>
    <script>
        function GroupPeople() {
            // Exercise 06
            var persons = [{ firstname: 'Evstati', lastname: 'Milenkov', age: 24 },
                            { firstname: 'Nikodim', lastname: 'Stavrev', age: 21 },
                            { firstname: 'Stavri', lastname: 'Nikodimov', age: 22 },
                            { firstname: 'Bat', lastname: 'Giorgi', age: 23 },
                            { firstname: 'Dinko', lastname: 'OtKaloqnovo', age: 21 },
                            { firstname: 'Dimko', lastname: 'Elenkov', age: 24 },
                            { firstname: 'Giorgi', lastname: 'Milenkov', age: 22 }];

            function groupPersons(array, groupBy) {
                var groupedArr = {};

                for (var i in array) {
                    var person = array[i];
                    var group = person[groupBy];

                    if (!groupedArr[group]) {
                        groupedArr[group] = []; //create key
                    }
                    groupedArr[group].push(person); // add to key
                }

                return groupedArr;
            }

            var key = 'age'
            var groupedArray = groupPersons(persons, key);
            console.log('Group people by ' + key +'.\n')

            for (var i in groupedArray) {
                var arr = groupedArray[i];
                for (var j in arr) {
                    var personIs = arr[j];
                    console.log(personIs.firstname + ' ' + personIs.lastname + ' ' + personIs.age);
                }
            }
        }
        GroupPeople();
    </script>
</body>
</html>
